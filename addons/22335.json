{"id": "22335", "name": "蓝奏云快速下载", "author": "xireiki", "version": "1.0.1", "url": "*", "code": "LyoKICogQG5hbWU6IOiTneWlj+S6keW/q+mAn+S4i+i9vQogKiBAQXV0aG9yOiB4aXJlaWtpCiAqIEB2ZXJzaW9uOiAyLjAuMQogKiBAZGVzY3JpcHRpb246IOiHquWKqOS4i+i9veiTneWlj+S6keaWh+S7tgogKiBAaW5jbHVkZTogKgogKiBAY3JlYXRlVGltZTogMjAyMS8xMi8wNAogKiBAdXBkYXRlVGltZTogMjEyMS8xMi8wNQogKi8KCihmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBkb3duRGF0YVVybChEYXRhLCBuYW1lKSB7CiAgICBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgbGluay5ocmVmID0gRGF0YTsKICAgIGxpbmsuZG93bmxvYWQgPSBuYW1lOwogICAgbGluay5zdHlsZSA9ICJkaXNwbGF5OiBub25lOyI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgbGluay5jbGljaygpOwogICAgZGVsZXRlIGxpbms7CiAgfQogIGZ1bmN0aW9uIGRvd25VcmwodXJsLCBuYW1lKSB7CiAgICBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgbGluay5ocmVmID0gdXJsOwogICAgbGluay5kb3dubG9hZCA9IG5hbWU7CiAgICBsaW5rLnN0eWxlID0gImRpc3BsYXk6IG5vbmU7IjsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICBsaW5rLmNsaWNrKCk7CiAgICBkZWxldGUgbGluazsKICB9CiAgZnVuY3Rpb24gZ2V0cHdkKCkgewogICAgaWYgKGxvY2F0aW9uLnNlYXJjaCAhPT0gIiIpIHsKICAgICAgcCA9IHt9OwogICAgICBhID0gbG9jYXRpb24uc2VhcmNoLnNwbGl0KCI/IilbMV0uc3BsaXQoIiYiKTsKICAgICAgZm9yICh2YXIgYiBpbiBhKSB7CiAgICAgICAgdmFyIGMgPSBhW2JdLnNwbGl0KCI9Iik7CiAgICAgICAgcFtjWzBdXSA9IGNbMV07CiAgICAgIH0KICAgICAgaWYgKHBbInB3ZCJdKSB7CiAgICAgICAgcmV0dXJuIHBbInB3ZCJdOwogICAgICB9IGVsc2UgaWYgKHBbInBhc3N3b3JkIl0pIHsKICAgICAgICByZXR1cm4gcFsicGFzc3dvcmQiXTsKICAgICAgfSBlbHNlIGlmIChwWyJwIl0pIHsKICAgICAgICByZXR1cm4gcFsicCJdOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG1haW4odXJsKSB7CiAgICBpZiAodXJsLnN1YnN0cigwLCA0KSA9PT0gIi90cC8iKSB7CiAgICAgIHZhciByZXNwb25zZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7CiAgICAgIGlmIChyZXNwb25zZS5pbmRleE9mKCJwd2QiKSA+IDApIHsKICAgICAgICB0cCA9IGdldHB3ZCgpCiAgICAgICAgcHdkID0gKHRwKSA/IHRwIDogcHJvbXB0KCLor7fovpPlhaXlr4bnoIHvvJoiKTsKICAgICAgICBzaWduID0gcmVzcG9uc2Uuc3BsaXQoIidzaWduJzonIilbMV0uc3BsaXQoIiciKVswXTsKICAgICAgICB4aHIgPSAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIdHRwIik7CiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICBkYXRlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICBpZiAoZGF0ZS56dCA9PSAxKSB7CiAgICAgICAgICAgICAgICBkb3duVXJsKGRhdGUuZG9tICsgIi9maWxlLyIgKyBkYXRlLnVybCwgZGF0ZS5pbmYpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoY29uZmlybSgi6K+35Yi35paw6YeN6K+VIikpIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB4aHIub3BlbigicG9zdCIsICIvYWpheG0ucGhwIik7CiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICJhY3Rpb24iOiAiZG93bnByb2Nlc3MiLAogICAgICAgICAgInNpZ24iOiBzaWduLAogICAgICAgICAgInAiOiBwd2QKICAgICAgICB9CiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICovKiIpOwogICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgeGhyLnNlbmQoImFjdGlvbj1kb3ducHJvY2VzcyZzaWduPSIgKyBzaWduICsgIiZwPSIgKyBwd2QpOwogICAgICB9IGVsc2UgewogICAgICAgIGZpZCA9IHJlc3BvbnNlLnNwbGl0KCInPyIpWzFdLnNwbGl0KCInIilbMF07CiAgICAgICAgZG93blVybCgiaHR0cHM6Ly9kZXZlbG9wZXIuIiArIHJlc3BvbnNlLnNwbGl0KCJodHRwczovL2RldmVsb3Blci4iKVsxXS5zcGxpdCgiLiIpWzBdICsgIi5jb20vZmlsZS8/IiArIGZpZCk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodXJsLnN1YnN0cigwLCAxKSA9PT0gIi8iKSB7CiAgICAgIHNoYXJlSWQgPSB1cmwuc3Vic3RyKDEsIHVybC5sZW5ndGgpOwogICAgICB2YXIgeGhyID0gKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSHR0cCIpOwogICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmluZGV4T2YoInB3ZCIpID4gMCkgewogICAgICAgICAgICAgIHRwID0gZ2V0cHdkKCkKICAgICAgICAgICAgICBwd2QgPSAodHApID8gdHAgOiBwcm9tcHQoIuivt+i+k+WFpeWvhuegge+8miIpOwogICAgICAgICAgICAgIHNpZ24gPSByZXNwb25zZS5zcGxpdCgiJ3NpZ24nOiciKVsxXS5zcGxpdCgiJyIpWzBdOwogICAgICAgICAgICAgIHhociA9ICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QpID8gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgOiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEh0dHAiKTsKICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIGRhdGUgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLnp0ID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGRvd25VcmwoZGF0ZS5kb20gKyAiL2ZpbGUvIiArIGRhdGUudXJsLCBkYXRlLmluZik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKCLor7fliLfmlrDph43or5UiKSkgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHhoci5vcGVuKCJwb3N0IiwgIi9hamF4bS5waHAiKTsKICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgImFjdGlvbiI6ICJkb3ducHJvY2VzcyIsCiAgICAgICAgICAgICAgICAic2lnbiI6IHNpZ24sCiAgICAgICAgICAgICAgICAicCI6IHB3ZAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IiwgImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qIik7CiAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICB4aHIuc2VuZCgiYWN0aW9uPWRvd25wcm9jZXNzJnNpZ249IiArIHNpZ24gKyAiJnA9IiArIHB3ZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZmlkID0gcmVzcG9uc2Uuc3BsaXQoIic/IilbMV0uc3BsaXQoIiciKVswXTsKICAgICAgICAgICAgICBkb3duVXJsKCJodHRwczovL2RldmVsb3Blci4iICsgcmVzcG9uc2Uuc3BsaXQoImh0dHBzOi8vZGV2ZWxvcGVyLiIpWzFdLnNwbGl0KCIuIilbMF0gKyAiLmNvbS9maWxlLz8iICsgZmlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB4aHIub3BlbigiZ2V0IiwgbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvdHAiICsgdXJsKTsKICAgICAgeGhyLnNlbmQoKTsKICAgIH0KICB9CiAgaWYgKGxvY2F0aW9uLmhvc3RuYW1lLnNwbGl0KCIuIilbMV0uc3Vic3RyKDAsIDYpID09PSAibGFuem91IikgewogICAgbWFpbihsb2NhdGlvbi5wYXRobmFtZSk7CiAgfQp9KSgpOw=="}